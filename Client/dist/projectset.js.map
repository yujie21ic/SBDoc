{"version":3,"sources":["webpack:///./web/projectset/projectset.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA,CAAC;;AAED;AACA;AACA,CAAC","file":"projectset.js","sourcesContent":["/**\n * Created by sunxin on 2016/12/20.\n */\nvar mainNav=require(\"../component/mainNav.vue\")\nvar urlList=require(\"../component/urlList.vue\")\nvar userEdit=require(\"../component/userEdit.vue\")\nif(!session.get(\"id\"))\n{\n    location.href=\"../login/login.html\"\n}\nelse if(!session.get(\"projectId\"))\n{\n    location.href=\"../project/project.html\"\n}\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        type:0,\n        session:$.clone(session.raw()),\n        project:{},\n        name:\"\",\n        role:0,\n        invitePending:false,\n        infoPending:false,\n        deletePending:false,\n    },\n    computed:{\n        users:function () {\n            var arr=this.project.users;\n            this.project.users=arr.filter(function (obj) {\n                if(obj.user._id==session.get(\"id\"))\n                {\n                    return false;\n                }\n                else\n                {\n                    return true;\n                }\n            })\n            return this.project.users;\n        }\n    },\n    components:{\n        \"mainnav\":mainNav,\n        \"urllist\":urlList,\n        \"useredit\":userEdit,\n    },\n    methods:{\n        saveInfo:function () {\n            var _this=this;\n            this.infoPending=true;\n            net.post(\"/project/create\",{\n                id:session.get(\"projectId\"),\n                dis:_this.project.dis,\n                name:_this.project.name\n            }).then(function (data) {\n                _this.infoPending=false;\n                if(data.code)\n                {\n                    $.notify(\"修改成功\",1);\n                }\n                else\n                {\n                    $.notify(data.msg,0);\n                }\n            })\n        },\n        saveUrls:function (arr) {\n            this.project.baseUrls=arr;\n        },\n        invite:function () {\n            var _this=this;\n            this.invitePending=true;\n            net.post(\"/project/member\",{\n                id:session.get(\"projectId\"),\n                user:_this.name,\n                role:_this.role\n            }).then(function (data) {\n                _this.invitePending=false;\n                if(data.code==200)\n                {\n                    $.notify(\"修改成功\",1);\n                    _this.project.users.push(data.data);\n                }\n                else\n                {\n                    $.notify(data.msg,0);\n                }\n            })\n        },\n        removeProject:function () {\n            var _this=this;\n            if(this.session.own==1)\n            {\n                $.confirm(\"确定删除该工程？该工程下的所有数据都会被删除!\",function () {\n                    _this.deletePending=true;\n                    net.delete(\"/project/item\",{\n                        id:session.get(\"projectId\")\n                    }).then(function (data) {\n                        _this.deletePending=false;\n                        if(data.code==200)\n                        {\n                            $.notify(\"删除成功\",1);\n                            setTimeout(function () {\n                                location.href=\"../project/project.html\"\n                            },1500);\n\n                        }\n                    })\n                })\n            }\n            else\n            {\n                $.confirm(\"确定退出该工程？\",function () {\n                    _this.deletePending=true;\n                    net.delete(\"/project/quit\",{\n                        id:session.get(\"projectId\")\n                    }).then(function (data) {\n                        _this.deletePending=false;\n                        if(data.code==200)\n                        {\n                            $.notify(\"退出成功\",1);\n                            setTimeout(function () {\n                                location.href=\"../project/project.html\"\n                            },1500);\n                        }\n                        else\n                        {\n                            $.notify(data.msg,0);\n                        }\n                    })\n                })\n            }\n        }\n    },\n    created:function () {\n        var _this=this;\n        net.get(\"/project/info\",{\n            id:session.get(\"projectId\")\n        }).then(function (data) {\n            $.stopLoading();\n            if(data.code==200)\n            {\n                _this.project=data.data;\n\n            }\n        })\n    }\n})\n\n$.ready(function () {\n    $.startLoading();\n})\n\n\n\n\n\n\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/projectset/projectset.js\n// module id = 150\n// module chunks = 3"],"sourceRoot":""}