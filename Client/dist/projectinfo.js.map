{"version":3,"sources":["webpack:///./web/projectinfo/projectinfo.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC,C","file":"projectinfo.js","sourcesContent":["/**\n * Created by sunxin on 2016/12/22.\n */\nvar mainNav=require(\"../component/mainNav.vue\")\nvar interface=require(\"../component/interface.vue\")\nvar setting=require(\"../component/setting.vue\")\nvar global=require(\"../component/global.vue\")\nvar test=require(\"../component/test.vue\")\nvar version=require(\"../component/version.vue\")\nvar config=require(\"../util/config\");\nvar bus=require(\"../bus/projectInfoBus\")\nvar itemAuto=require(\"../component/autocompleteItem.vue\");\nif(!session.get(\"id\"))\n{\n    location.href=\"../login/login.html\"\n}\nelse if(!session.get(\"projectId\"))\n{\n    location.href=\"../project/project.html\"\n}\nsession.remove(\"snapshotId\");\nsession.remove(\"snapshotDis\");\nsession.remove(\"snapshotCreator\");\nsession.remove(\"snapshotDate\");\nVue.component(\"itemauto\",itemAuto);\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        session:$.clone(session.raw()),\n        type:0,\n        arrApply:[],\n        showApply:false\n    },\n    components:{\n        \"mainnav\":mainNav,\n        \"interface\":interface,\n        \"setting\":setting,\n        \"global\":global,\n        \"test\":test,\n        \"version\":version\n    },\n    methods:{\n        handleApply:function (item,state) {\n            var _this=this;\n            $.startHud();\n            net.put(\"/project/handleapply\",{\n                id:session.get(\"projectId\"),\n                apply:item._id,\n                state:state\n            }).then(function (data) {\n                $.stopHud();\n                if(data.code==200)\n                {\n                    if(state==1)\n                    {\n                        item.handle=1;\n                        setTimeout(function () {\n                            location.href=\"../project/project.html\"\n                        },1000);\n                    }\n                    else\n                    {\n                        item.handle=2;\n                    }\n                }\n                else\n                {\n                    item.handle=3;\n                    $.notify(data.msg,0);\n                }\n            })\n        }\n    },\n    created:function () {\n        var _this=this;\n        Promise.all([\n            net.get(\"/project/interface\",{\n                id:session.get(\"projectId\")\n            }),\n            net.get(\"/project/info\",{\n                id:session.get(\"projectId\")\n            }),\n            net.get(\"/status/list\",{\n                id:session.get(\"projectId\")\n            }),\n            net.get(\"/test/list\",{\n                project:session.get(\"projectId\")\n            }),\n            net.get(\"/project/applylist\",{\n                id:session.get(\"projectId\")\n            }),\n            net.get(\"/version/list\",{\n                project:session.get(\"projectId\"),\n                page:0\n            })\n        ]).then(function (values) {\n            $.stopLoading();\n            var obj1=values[0];\n            var obj2=values[1];\n            var obj3=values[2];\n            var obj4=values[3];\n            var obj5=values[4];\n            var obj6=values[5];\n            if(obj1.code==200)\n            {\n                bus.$emit(\"initInterface\",obj1.data);\n            }\n            else\n            {\n                throw obj1.msg;\n            }\n            if(obj2.code==200)\n            {\n                bus.$emit(\"initInfo\",obj2.data);\n            }\n            else\n            {\n                throw obj2.msg;\n            }\n            if(obj3.code==200)\n            {\n                bus.$emit(\"initStatus\",obj3.data);\n            }\n            else\n            {\n                throw obj3.msg;\n            }\n            if(obj4.code==200)\n            {\n                bus.$emit(\"initTest\",obj4.data);\n            }\n            else\n            {\n                throw obj4.msg;\n            }\n            if(session.get(\"role\")==0)\n            {\n                if(obj5.code==200)\n                {\n                    obj5.data.forEach(function (obj) {\n                        obj.handle=0;\n                    })\n                    _this.arrApply=obj5.data;\n                    if(_this.arrApply.length>0)\n                    {\n                        _this.showApply=true;\n                    }\n                }\n                else\n                {\n                    throw obj5.msg;\n                }\n            }\n            if(obj6.code==200)\n            {\n                bus.$emit(\"initVersion\",obj6.data);\n            }\n            else\n            {\n                throw obj6.msg;\n            }\n        }).catch(function (err) {\n            $.stopLoading();\n            if(typeof(err)==\"string\")\n            {\n                $.notify(err,0);\n            }\n            else\n            {\n                $.notify(\"获取失败\",0);\n            }\n        })\n    }\n})\nwindow.vueObj=vue;\n$.ready(function () {\n    $.startLoading();\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/projectinfo/projectinfo.js\n// module id = 260\n// module chunks = 6"],"sourceRoot":""}