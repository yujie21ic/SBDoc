webpackJsonp([7],{259:function(t,e,a){(function(t,e,n,o){var i=a(8),s=a(29),d=a(32);t.get("id")||(location.href="../login/login.html"),t.remove("teamId"),t.remove("teamName"),t.remove("teamRole"),t.remove("teamOwn"),t.remove("versionId"),t.remove("versionName"),t.remove("versionDis");new e({el:"#app",data:{photo:t.get("photo"),name:t.get("name"),projectList:[],teamList:[],showAdd:!1,showTeam:!1,name:"",dis:"",addPending:!1,arrApply:[],showApply:!1},components:{mainnav:i,projectlist:s,teamlist:d},methods:{addProject:function(){if(!this.name)return void this.$message.error("请输入名称");var t=this;this.addPending=!0,n.post("/project/create",{name:t.name,dis:t.dis},{"content-type":"application/x-www-form-urlencoded"}).then(function(e){t.addPending=!1,t.name="",t.dis="",200==e.code&&(t.projectList.unshift(e.data),t.$notify({title:"创建成功",type:"success"}),t.showAdd=!1)})},addTeam:function(){if(!this.name)return void this.$message.error("请输入名称");var t=this;this.addPending=!0,n.post("/team/save",{name:t.name,dis:t.dis}).then(function(e){t.addPending=!1,t.name="",t.dis="",200==e.code&&(t.teamList.unshift(e.data),t.$notify({title:"创建成功",type:"success"}),t.showTeam=!1)})},importProject:function(){o.showBox(this,"importProject")},handleApply:function(t,e){var a=this;o.startHud(),n.put("/user/handleapply",{apply:t._id,state:e}).then(function(e){o.stopHud(),200==e.code?"object"==typeof e.data?(t.handle=1,a.teamList.unshift(e.data)):t.handle=2:(t.handle=3,o.notify(e.msg,0))})}},created:function(){var t=this;Promise.all([n.get("/project/list",{}),n.get("/user/applylist",{})]).then(function(e){o.stopLoading();var a=e[0],n=e[1];if(200!=a.code)throw a.msg;for(var i=0;i<a.data.project.length;i++)t.projectList.push(a.data.project[i]);for(var i=0;i<a.data.team.length;i++)t.teamList.push(a.data.team[i]);if(200!=n.code)throw n.msg;n.data.forEach(function(t){t.handle=0}),t.arrApply=n.data,t.arrApply.length>0&&(t.showApply=!0)}).catch(function(t){o.notify(t,0)})}});o.ready(function(){o.startLoading()})}).call(e,a(2),a(3),a(4),a(0))}},[259]);